var rse=(()=>{var u=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var y=(t,e)=>{for(var a in e)u(t,a,{get:e[a],enumerable:!0})},C=(t,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of w(e))!h.call(t,n)&&n!==a&&u(t,n,{get:()=>e[n],enumerable:!(r=p(e,n))||r.enumerable});return t};var S=t=>C(u({},"__esModule",{value:!0}),t);var i=(t,e,a)=>new Promise((r,n)=>{var c=o=>{try{m(a.next(o))}catch(g){n(g)}},I=o=>{try{m(a.throw(o))}catch(g){n(g)}},m=o=>o.done?r(o.value):Promise.resolve(o.value).then(c,I);m((a=a.apply(t,e)).next())});var R={};y(R,{CrateDocManager:()=>l,IndexSetter:()=>d,settings:()=>x,storage:()=>s});var f=null;chrome&&chrome.storage?f={getAllItems:()=>new Promise(t=>{chrome.storage.local.get(null,t)}),getItem:t=>new Promise(e=>{chrome.storage.local.get(t,a=>{e(a?a[t]:null)})}),setItem:(t,e)=>new Promise(a=>{chrome.storage.local.set({[t]:e},a)}),removeItem:t=>new Promise(e=>{chrome.storage.local.remove(t,e)})}:f={getAllItems:()=>new Promise(t=>{}),getItem:t=>new Promise(e=>{let a=localStorage.getItem(t);if(a)try{a=JSON.parse(a)}catch(r){}e(a)}),setItem:(t,e)=>new Promise(a=>{e instanceof Object&&(e=JSON.stringify(e)),localStorage.setItem(t,e),a()}),removeItem:t=>new Promise(e=>{localStorage.removeItem(t),e()})};var s=f;var P={get autoUpdate(){return i(this,null,function*(){return(yield s.getItem("auto-update"))||!1})},set autoUpdate(t){s.setItem("auto-update",t)},get isOfflineMode(){return i(this,null,function*(){return(yield s.getItem("offline-mode"))||!1})},set isOfflineMode(t){s.setItem("offline-mode",t)},get offlineDocPath(){return i(this,null,function*(){return(yield s.getItem("offline-path"))||""})},set offlineDocPath(t){s.setItem("offline-path",t)},get crateRegistry(){return i(this,null,function*(){return(yield s.getItem("crate-registry"))||"crates.io"})},set crateRegistry(t){s.setItem("crate-registry",t)},get defaultSearch(){return i(this,null,function*(){return(yield s.getItem("default-search"))||{thirdPartyDocs:!1,docsRs:!0,attributes:!0}})},set defaultSearch(t){s.setItem("default-search",t)},get showMacroRailroad(){return i(this,null,function*(){let t=yield s.getItem("show-macro-railroad");return t===void 0?!0:t})},set showMacroRailroad(t){s.setItem("show-macro-railroad",t)},get keepCratesUpToDate(){return i(this,null,function*(){let t=yield s.getItem("keep-crates-up-to-date");return t===void 0?!1:t})},set keepCratesUpToDate(t){s.setItem("keep-crates-up-to-date",t)}},x=P;var d=class t{static setStdStableIndex(e){s.setItem("index-std-stable",e)}static setStdNightlyIndex(e){s.setItem("index-std-nightly",e)}static setDescShards(e,a){a&&s.setItem(`desc-shards-${e}`,a)}static setBookIndex(e){s.setItem("index-book",e)}static setLabelIndex(e){s.setItem("index-label",e)}static setRfcIndex(e){s.setItem("index-rfc",e)}static setCrateMapping(e){s.setItem("index-crate-mapping",e)}static setCrateIndex(e){s.setItem("index-crate",e)}static setLintIndex(e){s.setItem("index-lint",e)}static setCaniuseIndex(e){s.setItem("index-caniuse",e)}static setRustcIndex(e){s.setItem("index-rustc",e)}static setTargetIndex(e){s.setItem("index-target",e)}static setCommandIndex(e){s.setItem("index-command",e)}static updateAllIndex(){t.setBookIndex(booksIndex),t.setCaniuseIndex(caniuseIndex),t.setCommandIndex(commandsIndex),t.setCrateIndex(crateIndex),t.setCrateMapping(mapping),t.setLabelIndex(labelsIndex),t.setLintIndex(lintsIndex),t.setRfcIndex(rfcsIndex),t.setRustcIndex(rustcIndex),t.setStdStableIndex(searchIndex),t.setTargetIndex(targetsIndex)}};var l=class t{static getCrates(){return i(this,null,function*(){return(yield s.getItem("crates"))||{}})}static getCrateByName(e){return i(this,null,function*(){let a=yield t.getCrates();if(a[e])return a[e];{let r=Object.entries(a).find(([n,{crateName:c}])=>c==e);return r?r[1]:null}})}static getCrateSearchIndex(e){return i(this,null,function*(){let a=yield s.getItem(`@${e}`);if(a)return a;{let r=yield t.getCrates(),n=Object.entries(r).find(([c,{crateName:I}])=>I==e);if(n){let c=n[0];return yield s.getItem(`@${c}`)}else return null}})}static addCrate(I){return i(this,arguments,function*({libName:e,crateVersion:a,searchIndex:r,crateName:n,descShards:c}){if(r&&e in r){yield s.setItem(`@${e}`,r);let m=r[e].doc,o=yield t.getCrates();e in o?o[e]={version:a,doc:m,time:o[e].time,crateName:n}:o[e]={version:a,doc:m,time:Date.now(),crateName:n},yield s.setItem("crates",o),d.setDescShards(e,c)}})}static removeCrate(e){return i(this,null,function*(){let a=yield t.getCrates();delete a[e],yield s.setItem("crates",a),yield s.removeItem(`@${e}`)})}};return S(R);})();
